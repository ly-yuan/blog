<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>node核心模块 -文件路径path | ly@blog的博客</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="全栈成长之路,从前端到Node.js再到数据库">
    
    <link rel="preload" href="/blog/assets/css/0.styles.15cc3f33.css" as="style"><link rel="preload" href="/blog/assets/js/app.74a07734.js" as="script"><link rel="preload" href="/blog/assets/js/5.b52f1ff8.js" as="script"><link rel="preload" href="/blog/assets/js/69.90d8daac.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.70554ae2.js"><link rel="prefetch" href="/blog/assets/js/100.e00bcad8.js"><link rel="prefetch" href="/blog/assets/js/101.cf991d6d.js"><link rel="prefetch" href="/blog/assets/js/102.bd33b5e2.js"><link rel="prefetch" href="/blog/assets/js/103.f544346b.js"><link rel="prefetch" href="/blog/assets/js/104.ad76519e.js"><link rel="prefetch" href="/blog/assets/js/105.730e47b4.js"><link rel="prefetch" href="/blog/assets/js/106.e2e0c07a.js"><link rel="prefetch" href="/blog/assets/js/107.3744efd2.js"><link rel="prefetch" href="/blog/assets/js/108.d457dfe4.js"><link rel="prefetch" href="/blog/assets/js/109.97e21a37.js"><link rel="prefetch" href="/blog/assets/js/11.8bcd87a6.js"><link rel="prefetch" href="/blog/assets/js/110.7c61f586.js"><link rel="prefetch" href="/blog/assets/js/111.b3d0fc5d.js"><link rel="prefetch" href="/blog/assets/js/112.8bd68078.js"><link rel="prefetch" href="/blog/assets/js/113.dae7f961.js"><link rel="prefetch" href="/blog/assets/js/114.2d597a8d.js"><link rel="prefetch" href="/blog/assets/js/115.165f2c61.js"><link rel="prefetch" href="/blog/assets/js/116.025e21ef.js"><link rel="prefetch" href="/blog/assets/js/117.13e26da9.js"><link rel="prefetch" href="/blog/assets/js/118.58c56efa.js"><link rel="prefetch" href="/blog/assets/js/119.eb80a8bb.js"><link rel="prefetch" href="/blog/assets/js/12.acc6d34d.js"><link rel="prefetch" href="/blog/assets/js/120.5757c86b.js"><link rel="prefetch" href="/blog/assets/js/121.95adfa3b.js"><link rel="prefetch" href="/blog/assets/js/122.90b950d7.js"><link rel="prefetch" href="/blog/assets/js/123.fc4ac8ac.js"><link rel="prefetch" href="/blog/assets/js/124.5e6599e3.js"><link rel="prefetch" href="/blog/assets/js/125.859d56d9.js"><link rel="prefetch" href="/blog/assets/js/126.8488e2ff.js"><link rel="prefetch" href="/blog/assets/js/127.83a5f321.js"><link rel="prefetch" href="/blog/assets/js/128.99b828e8.js"><link rel="prefetch" href="/blog/assets/js/129.dda1eebe.js"><link rel="prefetch" href="/blog/assets/js/13.824408f4.js"><link rel="prefetch" href="/blog/assets/js/130.b2ddab4c.js"><link rel="prefetch" href="/blog/assets/js/131.a13aff70.js"><link rel="prefetch" href="/blog/assets/js/132.6449aa59.js"><link rel="prefetch" href="/blog/assets/js/133.eb781bf5.js"><link rel="prefetch" href="/blog/assets/js/134.e6d7f933.js"><link rel="prefetch" href="/blog/assets/js/135.101ba8f2.js"><link rel="prefetch" href="/blog/assets/js/136.8037ce79.js"><link rel="prefetch" href="/blog/assets/js/137.988e30f6.js"><link rel="prefetch" href="/blog/assets/js/14.ba76e6b4.js"><link rel="prefetch" href="/blog/assets/js/15.af37f1b6.js"><link rel="prefetch" href="/blog/assets/js/16.f7821bc2.js"><link rel="prefetch" href="/blog/assets/js/17.acb143d5.js"><link rel="prefetch" href="/blog/assets/js/18.dfb60cf2.js"><link rel="prefetch" href="/blog/assets/js/19.a6853cc0.js"><link rel="prefetch" href="/blog/assets/js/2.3e0c97ad.js"><link rel="prefetch" href="/blog/assets/js/20.eb68a5fa.js"><link rel="prefetch" href="/blog/assets/js/21.b3e94a5d.js"><link rel="prefetch" href="/blog/assets/js/22.bf7594f5.js"><link rel="prefetch" href="/blog/assets/js/23.7a26abb3.js"><link rel="prefetch" href="/blog/assets/js/24.3a0e2284.js"><link rel="prefetch" href="/blog/assets/js/25.e2036572.js"><link rel="prefetch" href="/blog/assets/js/26.fdd61db3.js"><link rel="prefetch" href="/blog/assets/js/27.88ee342e.js"><link rel="prefetch" href="/blog/assets/js/28.2dba197d.js"><link rel="prefetch" href="/blog/assets/js/29.67e9a150.js"><link rel="prefetch" href="/blog/assets/js/3.b11921cb.js"><link rel="prefetch" href="/blog/assets/js/30.0b4504ec.js"><link rel="prefetch" href="/blog/assets/js/31.35a942d3.js"><link rel="prefetch" href="/blog/assets/js/32.1b425b76.js"><link rel="prefetch" href="/blog/assets/js/33.70e4d982.js"><link rel="prefetch" href="/blog/assets/js/34.d7aaeb1f.js"><link rel="prefetch" href="/blog/assets/js/35.a0d3c71e.js"><link rel="prefetch" href="/blog/assets/js/36.d4aa17d5.js"><link rel="prefetch" href="/blog/assets/js/37.e1b6bb8a.js"><link rel="prefetch" href="/blog/assets/js/38.25cf6812.js"><link rel="prefetch" href="/blog/assets/js/39.72e8a86b.js"><link rel="prefetch" href="/blog/assets/js/4.047f3f5b.js"><link rel="prefetch" href="/blog/assets/js/40.43578c5d.js"><link rel="prefetch" href="/blog/assets/js/41.3d3d2a08.js"><link rel="prefetch" href="/blog/assets/js/42.fad90f50.js"><link rel="prefetch" href="/blog/assets/js/43.c92b1680.js"><link rel="prefetch" href="/blog/assets/js/44.cbbf945d.js"><link rel="prefetch" href="/blog/assets/js/45.97e13179.js"><link rel="prefetch" href="/blog/assets/js/46.a0a78ec8.js"><link rel="prefetch" href="/blog/assets/js/47.de9ac3e3.js"><link rel="prefetch" href="/blog/assets/js/48.c1e6fd31.js"><link rel="prefetch" href="/blog/assets/js/49.469aaa8c.js"><link rel="prefetch" href="/blog/assets/js/50.216b986a.js"><link rel="prefetch" href="/blog/assets/js/51.9b109d30.js"><link rel="prefetch" href="/blog/assets/js/52.85094941.js"><link rel="prefetch" href="/blog/assets/js/53.b2682c9f.js"><link rel="prefetch" href="/blog/assets/js/54.c927f415.js"><link rel="prefetch" href="/blog/assets/js/55.f4ac5444.js"><link rel="prefetch" href="/blog/assets/js/56.430cbac7.js"><link rel="prefetch" href="/blog/assets/js/57.8b0f6495.js"><link rel="prefetch" href="/blog/assets/js/58.f428ce2b.js"><link rel="prefetch" href="/blog/assets/js/59.0c57c845.js"><link rel="prefetch" href="/blog/assets/js/6.d9e46f2e.js"><link rel="prefetch" href="/blog/assets/js/60.5ae989c0.js"><link rel="prefetch" href="/blog/assets/js/61.edce72c7.js"><link rel="prefetch" href="/blog/assets/js/62.88eff26b.js"><link rel="prefetch" href="/blog/assets/js/63.7942787f.js"><link rel="prefetch" href="/blog/assets/js/64.4f2e812d.js"><link rel="prefetch" href="/blog/assets/js/65.e2789671.js"><link rel="prefetch" href="/blog/assets/js/66.c537784f.js"><link rel="prefetch" href="/blog/assets/js/67.c22259ee.js"><link rel="prefetch" href="/blog/assets/js/68.e659bdf3.js"><link rel="prefetch" href="/blog/assets/js/7.6897ca43.js"><link rel="prefetch" href="/blog/assets/js/70.c19a403c.js"><link rel="prefetch" href="/blog/assets/js/71.5787158b.js"><link rel="prefetch" href="/blog/assets/js/72.76b63dfc.js"><link rel="prefetch" href="/blog/assets/js/73.9d9e52b5.js"><link rel="prefetch" href="/blog/assets/js/74.d687e016.js"><link rel="prefetch" href="/blog/assets/js/75.2370f0ab.js"><link rel="prefetch" href="/blog/assets/js/76.a566a607.js"><link rel="prefetch" href="/blog/assets/js/77.820f8ee3.js"><link rel="prefetch" href="/blog/assets/js/78.ec1d52b5.js"><link rel="prefetch" href="/blog/assets/js/79.290a0ba1.js"><link rel="prefetch" href="/blog/assets/js/8.49a8a0b3.js"><link rel="prefetch" href="/blog/assets/js/80.475ebade.js"><link rel="prefetch" href="/blog/assets/js/81.a15fa2be.js"><link rel="prefetch" href="/blog/assets/js/82.313388e8.js"><link rel="prefetch" href="/blog/assets/js/83.9770c9d2.js"><link rel="prefetch" href="/blog/assets/js/84.15d726f9.js"><link rel="prefetch" href="/blog/assets/js/85.d1c53f40.js"><link rel="prefetch" href="/blog/assets/js/86.26b3da51.js"><link rel="prefetch" href="/blog/assets/js/87.73b7a673.js"><link rel="prefetch" href="/blog/assets/js/88.f7c32624.js"><link rel="prefetch" href="/blog/assets/js/89.0cb43d70.js"><link rel="prefetch" href="/blog/assets/js/9.7a3a195f.js"><link rel="prefetch" href="/blog/assets/js/90.b23071bb.js"><link rel="prefetch" href="/blog/assets/js/91.df280fae.js"><link rel="prefetch" href="/blog/assets/js/92.44c6f292.js"><link rel="prefetch" href="/blog/assets/js/93.ced630dd.js"><link rel="prefetch" href="/blog/assets/js/94.9611d8d9.js"><link rel="prefetch" href="/blog/assets/js/95.07b801e0.js"><link rel="prefetch" href="/blog/assets/js/96.08a9387a.js"><link rel="prefetch" href="/blog/assets/js/97.96ac0082.js"><link rel="prefetch" href="/blog/assets/js/98.92843a37.js"><link rel="prefetch" href="/blog/assets/js/99.1b6643a2.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.15cc3f33.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">ly@blog的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/blog/node-quick/" class="nav-link">
  node
</a></div><div class="nav-item"><a href="/blog/webframe/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/blog/vue-quick/" class="nav-link">
  快速掌握vue
</a></div><div class="nav-item"><a href="/blog/database/" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/blog/react/" class="nav-link">
  react
</a></div><div class="nav-item"><a href="/blog/webpack/" class="nav-link">
  webpack
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/blog/node-quick/" class="nav-link">
  node
</a></div><div class="nav-item"><a href="/blog/webframe/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/blog/vue-quick/" class="nav-link">
  快速掌握vue
</a></div><div class="nav-item"><a href="/blog/database/" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/blog/react/" class="nav-link">
  react
</a></div><div class="nav-item"><a href="/blog/webpack/" class="nav-link">
  webpack
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/node/" aria-current="page" class="sidebar-link">node目录</a></li><li><a href="/blog/node/promise.html" class="sidebar-link">深度了解promise</a></li><li><a href="/blog/node/what.html" class="sidebar-link">node.js究竟是什么</a></li><li><a href="/blog/node/event_loop.html" class="sidebar-link">node事件循环</a></li><li><a href="/blog/node/util.html" class="sidebar-link">node-模块util</a></li><li><a href="/blog/node/path.html" aria-current="page" class="active sidebar-link">node核心模块-path</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/node/path.html#path" class="sidebar-link">path</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/node/path.html#path-normalize" class="sidebar-link">path.normalize</a></li><li class="sidebar-sub-header"><a href="/blog/node/path.html#path-join" class="sidebar-link">path.join</a></li><li class="sidebar-sub-header"><a href="/blog/node/path.html#path-parse" class="sidebar-link">path.parse</a></li><li class="sidebar-sub-header"><a href="/blog/node/path.html#path-basename" class="sidebar-link">path.basename</a></li><li class="sidebar-sub-header"><a href="/blog/node/path.html#path-dirname" class="sidebar-link">path.dirname</a></li><li class="sidebar-sub-header"><a href="/blog/node/path.html#path-extname" class="sidebar-link">path.extname</a></li><li class="sidebar-sub-header"><a href="/blog/node/path.html#path-resolve" class="sidebar-link">path.resolve</a></li><li class="sidebar-sub-header"><a href="/blog/node/path.html#path-relative" class="sidebar-link">path.relative</a></li></ul></li></ul></li><li><a href="/blog/node/module_fs.html" class="sidebar-link">node核心模块-fs</a></li><li><a href="/blog/node/stream.html" class="sidebar-link">node核心模块-stream</a></li><li><a href="/blog/node/buffer.html" class="sidebar-link">node核心模块-buffer</a></li><li><a href="/blog/node/processAndThread.html" class="sidebar-link">深入理解进程与线程</a></li><li><a href="/blog/node/queue.html" class="sidebar-link">Node.js中的消息队列</a></li><li><a href="/blog/node/overflow.html" class="sidebar-link">Node.js 内存溢出时如何处理？</a></li><li><a href="/blog/node/events.html" class="sidebar-link">[源码解读]一文彻底搞懂Events模块</a></li><li><a href="/blog/node/errors.html" class="sidebar-link">nodejs十个常见误区</a></li><li><a href="/blog/node/AsyncIO.html" class="sidebar-link">Node 与底层之间如何执行异步 I/O 调用</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><strong>前言</strong></p> <p>之前在做<code>webpack</code>配置时候多次用到路径相关内容，最近在写项目的时候，有一个文件需要上传到阿里云oss的功能，同时本地服务器也需要保留一个文件备份。多次用到了文件路径相关内容以及Node核心API的<code>path</code>模块，所以系统的学习了一下，整理了这篇文章。</p> <h1 id="node中的路径分类"><a href="#node中的路径分类" class="header-anchor">#</a> node中的路径分类</h1> <p>node中的路径大致分5类，<code>dirname</code>,<code>filename</code>,<code>process.cwd()</code>,<code>./</code>,<code>../</code>,其中<code>dirname</code>,<code>filename</code>,<code>process.cwd()</code>绝对路径</p> <p>通过代码对每个分类进行说明：</p> <p>文件目录结构如下：</p> <div class="language- extra-class"><pre class="language-text"><code>代码pra/
  - node核心API/
      - fs.js
      - path.js
</code></pre></div><p>path.js中的代码</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在代码pra目录下运行命令 <code>node node核心API/path.js</code>，我们可以看到结果如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>“”<span class="token operator">/</span>代码pra<span class="token operator">/</span>node核心<span class="token constant">API</span>
<span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>“”<span class="token operator">/</span>代码pra<span class="token operator">/</span>node核心<span class="token constant">API</span><span class="token operator">/</span>path<span class="token punctuation">.</span>js
<span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>“”<span class="token operator">/</span>代码pra
<span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>“”<span class="token operator">/</span>代码pra
</code></pre></div><p>然后我们有可以在<code>node核心API目录下</code>运行这个文件，<code>node path.js</code>,运行结果如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>“”<span class="token operator">/</span>代码pra<span class="token operator">/</span>node核心<span class="token constant">API</span>
<span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>“”<span class="token operator">/</span>代码pra<span class="token operator">/</span>node核心<span class="token constant">API</span><span class="token operator">/</span>path<span class="token punctuation">.</span>js
<span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>“”<span class="token operator">/</span>代码pra<span class="token operator">/</span>node核心<span class="token constant">API</span>
<span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>“”<span class="token operator">/</span>代码pra<span class="token operator">/</span>node核心<span class="token constant">API</span>
</code></pre></div><p>对比输出结果，暂时得到的结论是</p> <ul><li>__dirname: 总是返回被执行的 js 所在文件夹的绝对路径</li> <li>__filename: 总是返回被执行的 js 的绝对路径</li> <li>process.cwd(): 总是返回运行 node 命令时所在的文件夹的绝对路径</li> <li>./: 跟 process.cwd() 一样，返回 node 命令时所在的文件夹的绝对路径</li></ul> <p>为什么说上面是暂时得到的结论，因为是有错误的，再看一段代码：
我们在path.js中加上这句代码</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>exports<span class="token punctuation">.</span><span class="token constant">A</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><p>之前直接通过readFile读取文件路径报错，</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./path.js'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>现在在刚才报错的fs.js里面加这两句代码看看：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> test <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./path.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span>
</code></pre></div><p>在<code>代码pra/</code>目录下运行<code>node node核心API/fs.js</code>，最后查看结果，说明是可以访问到的：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span> <span class="token constant">A</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
</code></pre></div><p>那么关于 <code>./</code>正确的结论是：</p> <p>在 <code>require()</code>中使用是跟<code>__dirname</code> 的效果相同，不会因为启动脚本的目录不一样而改变，在其他情况下跟 <code>process.cwd()</code> 效果相同，是相对于启动脚本所在目录的路径。</p> <h4 id="路径知识总结"><a href="#路径知识总结" class="header-anchor">#</a> 路径知识总结：</h4> <ul><li><code>__dirname</code>： 获得当前执行文件所在目录的完整目录名</li> <li><code>__filename</code>： 获得当前执行文件的带有完整绝对路径的文件名</li> <li><code>process.cwd()</code>：获得当前执行node命令时候的文件夹目录名</li> <li><code>./</code>： 不使用require时候，<code>./</code>与<code>process.cwd()</code>一样，使用<code>require</code>时候，与<code>__dirname</code>一样</li></ul> <p>只有在 require() 时才使用相对路径(./, ../) 的写法，其他地方一律使用绝对路径，如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 当前目录下</span>
 path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>__filename<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'/path.js'</span><span class="token punctuation">;</span> 
<span class="token comment">// 相邻目录下</span>
 path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../regx/regx.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="path"><a href="#path" class="header-anchor">#</a> path</h2> <p>前面讲解了路径的相关比较，接下来单独聊聊path这个模块，这个模块在很多地方比较常用，所以，对于我们来说，掌握他，对我们以后的发展更有利，不用每次看webpack的配置文件还要去查询一下这个api是干什么用的，很影响我们的效率</p> <blockquote><p>这是api官网地址:https://nodejs.org/api/path.html</p></blockquote> <p>个人认为官网中的api没有必要都掌握，下面会对一些常用的api进行讲解，我经常用到的，或者作为一个前端开发工程师在webpack等工程配置的时候经常用到的。</p> <h3 id="path-normalize"><a href="#path-normalize" class="header-anchor">#</a> path.normalize</h3> <p><strong>举例说明</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token string">'/koala/Desktop//“”//代码pra/..'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>规范后的结果</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>“”<span class="token operator">/</span>代码pra
</code></pre></div><p><strong>作用总结</strong></p> <p>规范化路径，把不规范的路径规范化。</p> <h3 id="path-join"><a href="#path-join" class="header-anchor">#</a> path.join</h3> <p><strong>举例说明</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token string">'task.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>转化后的结果</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>src<span class="token operator">/</span>task<span class="token punctuation">.</span>js
<span class="token punctuation">.</span>
</code></pre></div><p><strong>作用总结</strong></p> <blockquote><p>path.join([...paths])</p></blockquote> <ol><li>传入的参数是字符串的路径片段，可以是一个，也可以是多个</li> <li>返回的是一个拼接好的路径，但是根据平台的不同，他会对路径进行不同的规范化，举个例子，<code>Unix</code>系统是<code>/</code>，<code>Windows</code>系统是<code>\</code>，那么你在两个系统下看到的返回结果就不一样。</li> <li>如果返回的路径字符串长度为零，那么他会返回一个<code>.</code>，代表当前的文件夹。</li> <li>如果传入的参数中有不是字符串的，那就直接会报错</li></ol> <h3 id="path-parse"><a href="#path-parse" class="header-anchor">#</a> path.parse</h3> <p><strong>举例说明</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'/koala/Desktop/“”/代码pra/node核心API'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>运行结果</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span> root<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
  dir<span class="token operator">:</span> <span class="token string">'/koala/Desktop/“”/代码pra'</span><span class="token punctuation">,</span>
  base<span class="token operator">:</span> <span class="token string">'node核心API'</span><span class="token punctuation">,</span>
  ext<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">'node核心API'</span> 
<span class="token punctuation">}</span>
</code></pre></div><p><strong>作用总结</strong></p> <p>他返回的是一个对象，那么我们来把这么几个名词熟悉一下：</p> <ol><li>root：代表根目录</li> <li>dir：代表文件所在的文件夹</li> <li>base：代表整一个文件</li> <li>name：代表文件名</li> <li>ext: 代表文件的后缀名</li></ol> <h3 id="path-basename"><a href="#path-basename" class="header-anchor">#</a> path.basename</h3> <p><strong>举例说明</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">'/koala/Desktop/“”/代码pra/node核心API'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">'/koala/Desktop/“”/代码pra/node核心API/path.js'</span><span class="token punctuation">,</span> <span class="token string">'.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>运行结果</strong></p> <p>看了上面代码的例子，我想应该知道了basename结果，嘿嘿。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>node核心<span class="token constant">API</span>
path
</code></pre></div><p><strong>作用总结</strong></p> <p>basename接收两个参数，第一个是<code>path</code>，第二个是<code>ext</code>(可选参数)，当输入第二个参数的时候，打印结果不出现后缀名</p> <h3 id="path-dirname"><a href="#path-dirname" class="header-anchor">#</a> path.dirname</h3> <p><strong>举例说明</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span><span class="token string">'/koala/Desktop/“”/代码pra/node核心API'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>运行结果</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>“”<span class="token operator">/</span>代码pra
</code></pre></div><p><strong>作用总结</strong></p> <p>返回文件的目录完整地址</p> <h3 id="path-extname"><a href="#path-extname" class="header-anchor">#</a> path.extname</h3> <p><strong>举例说明</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'index.coffee.md'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'index.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'.index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>运行结果</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">.</span>html
<span class="token punctuation">.</span>md
<span class="token punctuation">.</span>
<span class="token string">''</span>
<span class="token string">''</span>
</code></pre></div><p><strong>作用总结</strong></p> <p>返回的是后缀名，但是最后两种情况返回'',大家注意一下。</p> <h3 id="path-resolve"><a href="#path-resolve" class="header-anchor">#</a> path.resolve</h3> <p><strong>举例说明</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'/foo/bar'</span><span class="token punctuation">,</span> <span class="token string">'/bar/faa'</span><span class="token punctuation">,</span> <span class="token string">'..'</span><span class="token punctuation">,</span> <span class="token string">'a/../c'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>输出结果</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">/</span>bar<span class="token operator">/</span>c
</code></pre></div><p><strong>作用总结</strong></p> <blockquote><p>path.resolve([...paths])</p></blockquote> <p>path.resolve就相当于是shell下面的<code>cd</code>操作，从左到右运行一遍<code>cd path</code>命令，最终获取的绝对路径/文件名，这个接口所返回的结果了。但是<code>resolve</code>操作和<code>cd</code>操作还是有区别的，<code>resolve</code>的路径可以没有，而且最后进入的可以是文件。具体<code>cd</code>步骤如下</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>cd <span class="token operator">/</span>foo<span class="token operator">/</span>bar<span class="token operator">/</span>    <span class="token comment">//这是第一步, 现在的位置是/foo/bar/</span>
cd <span class="token operator">/</span>bar<span class="token operator">/</span>faa     <span class="token comment">//这是第二步，这里和第一步有区别，他是从/进入的，也就时候根目录，现在的位置是/bar/faa</span>
cd <span class="token punctuation">.</span><span class="token punctuation">.</span>       <span class="token comment">//第三步，从faa退出来，现在的位置是 /bar</span>
cd a<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>c   <span class="token comment">//第四步，进入a，然后在推出，在进入c，最后位置是/bar/c</span>
</code></pre></div><h3 id="path-relative"><a href="#path-relative" class="header-anchor">#</a> path.relative</h3> <p><strong>举例说明</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span><span class="token string">'/data/orandea/test/aaa'</span><span class="token punctuation">,</span> <span class="token string">'/data/orandea/impl/bbb'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span><span class="token string">'/data/demo'</span><span class="token punctuation">,</span> <span class="token string">'/data/demo'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span><span class="token string">'/data/demo'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>运行结果</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>impl<span class="token operator">/</span>bbb
 <span class="token string">&quot;&quot;</span>
 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>“”<span class="token operator">/</span>代码pra<span class="token operator">/</span>node核心<span class="token constant">API</span>
</code></pre></div><p><strong>作用总结</strong></p> <p>path.relative(from, to)</p> <p>描述：从from路径，到to路径的相对路径。</p> <p>边界：</p> <ul><li>如果from、to指向同个路径，那么，返回空字符串。</li> <li>如果from、to中任一者为空，那么，返回当前工作路径。</li></ul> <p>进阶技术路线</p> <p><img src="http://img.xiaogangzai.cn/way.jpg" alt="">
加入我们一起学习吧！
<img src="http://img.xiaogangzai.cn/code.jpg" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/node/util.html" class="prev">
        node-模块util
      </a></span> <span class="next"><a href="/blog/node/module_fs.html">
        node核心模块-fs
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.74a07734.js" defer></script><script src="/blog/assets/js/5.b52f1ff8.js" defer></script><script src="/blog/assets/js/69.90d8daac.js" defer></script>
  </body>
</html>
